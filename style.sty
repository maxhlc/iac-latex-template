% region formatting
\usepackage[UKenglish]{babel}
\usepackage[UKenglish]{isodate}
\cleanlookdateon

% page layout
\usepackage{geometry}
\geometry{
	letterpaper,
	top=25mm,
	right=25mm,
	bottom=25mm,
	left=25mm,
	headheight=25pt
}
\setlength{\columnsep}{0.59cm}
\usepackage[all]{nowidow}

% set font
\usepackage{fontspec}
\usepackage{unicode-math}
\setmainfont{Times New Roman}

% equations
\usepackage{amsmath}
\usepackage{xfrac}
\DeclareMathOperator{\atantwo}{atan2}
\DeclareMathOperator{\arctantwo}{arctan2}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator*{\argmin}{arg\,min}
\newcommand{\rpm}{\raisebox{.2ex}{$\pm$}}

% colour
\usepackage[svgnames]{xcolor}

% email formatting
\newcommand{\email}[1]{{\hypersetup{allcolors=black}\href{mailto:#1}{\underline{\smash{#1}}}}}

% set title block
\makeatletter         
\renewcommand\maketitle{
    {\centering
        \iacsession
        
        \vspace{\baselineskip}
        
        \textbf{\iactitle}
        
        \vspace{\baselineskip}
        
        \textbf{\iacauthors}
        
        \vspace{\baselineskip}
    }
    
    {\raggedright

    \iacinstitutions
    
    \noindent * Corresponding Author
    }
}
\makeatother

% indent
\usepackage{indentfirst}
\setlength{\parindent}{0.5cm}

% abstract
\usepackage{abstract}
\setlength{\absleftindent}{0mm}
\setlength{\absrightindent}{0mm}
\setlength{\absparindent}{0.5cm}
\setlength{\abstitleskip}{-1.5em}
\renewcommand*\abstractnamefont{\normalfont\bfseries}
\renewcommand*\abstracttextfont{\normalfont}
\renewcommand*\abstractname{\centering\textbf{Abstract}}

% headers
\usepackage{fancyhdr}
\usepackage{lastpage}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\chead{
    \footnotesize
    \iaccopyright
}
\lfoot{\iacsession}
\rfoot{Page~\thepage~of~\pageref*{LastPage}}

% section formatting
\usepackage{titlesec}
\titleformat{\section}
  {\normalfont\bfseries}{\thesection.}{1.5\fontdimen2\font}{}
\titlespacing*{\section}
  {0pt}{\baselineskip}{0.25\baselineskip}
\titleformat{\subsection}
  {\normalfont\itshape}{\thesubsection}{1.5\fontdimen2\font}{}
\titlespacing*{\subsection}
  {0pt}{\baselineskip}{0.25\baselineskip}
\titleformat{\subsubsection}
  {\normalfont\itshape}{\thesubsubsection}{1.5\fontdimen2\font}{}
\titlespacing*{\subsubsection}
  {0pt}{\baselineskip}{0.25\baselineskip}

% references
\usepackage[autopunct=true,autostyle=tryonce]{csquotes}
\usepackage[citestyle=numeric,%
style=numeric,%
sorting=none,%
giveninits=true,%
backend=biber,
dateabbrev=false]{biblatex}
\addbibresource{references.bib}
% title without quotation marks
\DeclareFieldFormat[article,book,inbook,incollection,inproceedings,patent,thesis,unpublished,misc]{title}{#1}
\DeclareFieldFormat[article,book,inbook,incollection,inproceedings,patent,thesis,unpublished,misc]{booktitle}{#1}
\DeclareFieldFormat{journaltitle}{#1}
\DeclareFieldFormat[article]{year}{\mkbibparens{#1}}
\DeclareFieldFormat[misc]{date}{\thefield{day} \mkbibmonth{\thefield{month}} \thefield{year}}
\DeclareFieldFormat[misc]{url}{\url{#1}}
\DeclareFieldFormat{shortyear}{\mkbibshortyear#1}
\def\mkbibshortyear#1#2#3#4{#3#4}
\DeclareFieldFormat{urldate}{\mkbibparens{accessed \thefield{urlday}.\thefield{urlmonth}.\printfield[shortyear]{urlyear}}}
% commas bewteen units
\renewcommand*{\newunitpunct}{\addcomma\space}
% no pp
\DeclareFieldFormat[article]{pages}{#1}
% last author
\renewcommand*{\finalnamedelim}{\addcomma\addspace}
% book
\DeclareBibliographyDriver{book}{%
  \printnames{author}%
  \newunit\newblock%
  \printfield{title}%
  \newunit\newblock%
  \printfield{edition}
  \newunit\newblock%
  \printlist{publisher}%
  \newunit\newblock%
  \printlist{location}%
  \newunit\newblock%
  \printfield{year}%
  \finentry%
}
% book chapter
\DeclareBibliographyDriver{incollection}{%
  \printnames{author}%
  \newunit\newblock%
  \printfield{title}%
  \newunit\newblock%
  \addcomma\space in: \printnames{editor}  \mkbibparens{Eds.}%
  \newunit\newblock%
  \printfield{booktitle}
  \newunit\newblock%
  \printlist{publisher}%
  \newunit\newblock%
  \printlist{location}%
  \newunit\newblock%
  \printfield{year}%
  \newunit\newblock%
  \printfield{pages}
  \finentry%
}
% journal article
\DeclareBibliographyDriver{article}{%
  \printnames{author}%
  \newunit\newblock
  \printfield{title}%
  \newunit\newblock%
  \printfield{journaltitle}%
  \space%
  \printfield{volume}%
  \space%
  \printfield{year}%
  \space%
  \printfield{pages}%
  \finentry%
}
% proceedings
\DeclareBibliographyDriver{inproceedings}{%
  \printnames{author}%
  \newunit\newblock
  \printfield{title}%
  \newunit\newblock%
  \printfield{eventtitle}%
  \newunit\newblock%
  \printlist{location}
  \newunit\newblock%
  \printfield{note}%
  \finentry%
}

% referencing
\usepackage[
breaklinks=true,
colorlinks=true,
linkcolor=black,
citecolor=black,
urlcolor=blue,
% hidelinks
]{hyperref}
\urlstyle{same}
\usepackage[capitalise,noabbrev]{cleveref}
\Crefname{figure}{Fig.}{Figs.}

% tables
\usepackage{booktabs}
\usepackage{array}
\usepackage{longtable}

% figure
\usepackage{float}
\usepackage[labelsep=period]{caption}
\captionsetup[figure]{name={Fig.}}
\usepackage{subcaption}
\usepackage{placeins}
\setlength{\floatsep}{\baselineskip}
\setlength{\textfloatsep}{\baselineskip}
\setlength{\intextsep}{\baselineskip}

% footnotes
\usepackage[hang,flushmargin]{footmisc}

% nomenclature
\usepackage{nomencl}
\renewcommand*{\nomprefix}{}
\makenomenclature

% acronyms
\usepackage{acro}
\acsetup{make-links=false,
         index/use=true,
         list/display=used,
         pages/display=none,
         include-endings
}
\input{acronyms.tex}

% tikz
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{arrows.meta, calc}

% units
\usepackage{siunitx}
\sisetup{detect-all}

% utilities
\usepackage{lipsum}
\setlength{\marginparwidth}{2cm} 
\usepackage{todonotes}
